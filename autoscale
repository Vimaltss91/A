import subprocess
import json

def post_slack_message_via_curl(token, channel, message):
    url = "https://slack.com/api/chat.postMessage"
    headers = [
        f"Authorization: Bearer {token}",
        "Content-Type: application/json"
    ]
    
    data = {
        "channel": channel,
        "text": message
    }

    # Construct the curl command
    curl_command = [
        "curl", "-X", "POST", url,
        "-H", headers[0],
        "-H", headers[1],
        "-d", json.dumps(data)
    ]

    # Execute the curl command
    try:
        result = subprocess.run(curl_command, check=True, text=True, capture_output=True)
        print("Curl command executed successfully.")
        print("Response:", result.stdout)
    except subprocess.CalledProcessError as e:
        print(f"Error occurred: {e.stderr}")

if __name__ == "__main__":
    slack_token = "xoxb-your-slack-bearer-token"  # Your Slack bot token
    channel_id = "#your-channel"  # Use the channel name with '#' or the channel ID
    message = "Hello, @vts, @chand! Please review this."  # Your message

    post_slack_message_via_curl(slack_token, channel_id, message)
