import os
from ruamel.yaml import YAML

yaml_file_path = "third-party-dependencies/services_versions.yml"

APIGW_VERSION = os.environ.get("APIGW_VERSION")
NRFCLIENT_VERSION = os.environ.get("NRFCLIENT_VERSION")
NRFCOMMON_VERSION = os.environ.get("NRFCOMMON_VERSION")
DEBUGTOOLS_VERSION = os.environ.get("DEBUGTOOLS_VERSION")
NFTTEST_VERSION = os.environ.get("NFTTEST_VERSION")
CNC_ENABLE = os.environ.get("ENABLE_CNC", "false").lower() == "true"  # default false

# Helper function to apply prefix
def get_jar_name(name):
    return f"cnc-{name}" if CNC_ENABLE else name

APIGW_ARTIFACTS = [
    {
        "helm_charts": ["ingress_gateway", "egress_gateway", "alternate_route"]
    },
    {
        "docker_images": [
            "ingress_gateway",
            "egress_gateway",
            "alternate_route",
            "configurationinit",
            "configurationupdate",
            "common_config_hook"
        ]
    },
    {
        "jar_libs": [
            get_jar_name("commonconfigclient"),
            get_jar_name("commonconfigserver"),
            get_jar_name("commonconfigvalidator"),
            get_jar_name("alternateroutevalidator"),
            get_jar_name("ingressvalidator"),
            get_jar_name("egressvalidator")
        ]
    }
]

NRFCLIENT_ARTIFACTS = [
    {
        "helm_charts": ["nrf-client"]
    },
    {
        "docker_images": ["nrf-client"]
    },
    {
        "jar_libs": [get_jar_name("nrfclientvalidator")]
    }
]

NRFCOMMON_ARTIFACTS = [
    {
        "jar_libs": [get_jar_name("nrfcommon")]
    }
]
